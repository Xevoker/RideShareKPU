<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Edit Profile â€“ RideShare</title>
  <link rel="stylesheet" href="../CSS/edit.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="logo-container">
      <img src="../images/a.jpg" class="logo-img" alt="Logo" />
      <h2>Ride<span>Share</span></h2>
    </div>
    <nav>
      <ul>
        <li><a href="dashboard.php"aria-label="Dashboard">Dashboard</a></li>
        <li><a href="join.html" aria-label="Join Ride">Join Ride</a></li>
        <li><a href="offer.php" aria-label="Offer Ride">Offer Ride</a></li>
        <li><a href="find.php" aria-label="Find Ride">Find Ride</a></li>
        <li><a href="profile.php" aria-label="Profile">Profile</a></li>
        <li><a href="messages.html" aria-label="Messages">Messages</a></li>
        <li><a href="ride history.html" aria-label="Ride History">Ride History</a></li>
        <li><a href="feedback.html" aria-label="User Feedback">Feedback</a></li>
        <li><a href="settings.html"aria-label="Settings">Settings</a></li>
        <li><a href="logout.php" aria-label="Logout">Logout</a></li>
      </ul>
    </nav>
  </aside>

  <main class="main-content">
    <header class="header">
      <h1>Edit Profile</h1>
    </header>

    <section class="edit-profile-form">
      <form id="editProfileForm" action="#" method="POST">
        <!-- Basic Info -->
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input type="text" id="fullName" name="fullName" required />
        </div>

        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" required />
        </div>

        <div class="form-group">
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone" />
        </div>

        <div class="form-group">
          <label for="dob">Date of Birth</label>
          <input type="date" id="dob" name="dob" />
        </div>

        <div class="form-group">
          <label for="gender">Gender</label>
          <select id="gender" name="gender">
            <option value="">Select</option>
            <option value="Female">Female</option>
            <option value="Male">Male</option>
            <option value="Non-binary">Non-binary</option>
            <option value="Prefer not to say">Prefer not to say</option>
          </select>
        </div>

        <div class="form-group">
          <label for="contactMethod">Preferred Contact Method</label>
          <select id="contactMethod" name="contactMethod">
            <option value="Email">Email</option>
            <option value="Phone">Phone</option>
          </select>
        </div>

        <div class="form-group">
          <label for="location">Campus Location</label>
          <select id="location" name="location" required>
            <option value="Surrey Campus">Surrey Campus</option>
            <option value="Langley Campus">Langley Campus</option>
            <option value="Richmond Campus">Richmond Campus</option>
  <option value="Richmond Campus"> Campus</option>
          </select>
        </div>

        <div class="form-group">
          <label for="vehicle">Vehicle (optional)</label>
          <input type="text" id="vehicle" name="vehicle" />
        </div>

        <div class="form-group">
          <label for="linkedin">LinkedIn Profile URL</label>
          <input
  type="text"
  id="linkedin"
  name="linkedin"
  placeholder="https://linkedin.com/in/yourprofile"
/>

        </div>

        <div class="form-group">
          <label for="emergencyName">Emergency Contact Name</label>
          <input type="text" id="emergencyName" name="emergencyName" />
        </div>

        <div class="form-group">
          <label for="emergencyPhone">Emergency Contact Phone</label>
          <input type="tel" id="emergencyPhone" name="emergencyPhone" />
        </div>

        <div class="form-group">
          <label for="favoriteMusic">Favorite Music Genre</label>
          <select id="favoriteMusic" name="favoriteMusic">
            <option value="">Select</option>
            <option value="Pop">Pop</option>
            <option value="Rock">Rock</option>
            <option value="Hip Hop">Hip Hop</option>
            <option value="Jazz">Jazz</option>
            <option value="Classical">Classical</option>
            <option value="Country">Country</option>
            <option value="Electronic">Electronic</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <fieldset class="form-group">
          <legend>Carpool Preferences</legend>
          <label><input type="checkbox" name="carpoolPrefs" value="Non-Smoking" /> Non-Smoking</label><br />
          <label><input type="checkbox" name="carpoolPrefs" value="Pets Allowed" /> Pets Allowed</label><br />
          <label><input type="checkbox" name="carpoolPrefs" value="Music Allowed" /> Music Allowed</label><br />
          <label><input type="checkbox" name="carpoolPrefs" value="Chatty Driver" /> Chatty Driver</label>
        </fieldset>

        <div class="form-group">
          <label for="bio">Short Bio</label>
          <textarea id="bio" name="bio" rows="4" placeholder="Write something about yourself..."></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-save">Save Changes</button>
          <a href="profile.html" class="btn-cancel">Cancel</a>
        </div>
      </form>
    </section>
  </main>

<script>
  // Load profile data from localStorage on page load
  window.addEventListener('DOMContentLoaded', () => {
    const profileData = JSON.parse(localStorage.getItem('rideShareProfile'));
    if (profileData) {
      document.getElementById('fullName').value = profileData.fullName || '';
      document.getElementById('email').value = profileData.email || '';
      document.getElementById('phone').value = profileData.phone || '';
      document.getElementById('dob').value = profileData.dob || '';
      document.getElementById('gender').value = profileData.gender || '';
      document.getElementById('contactMethod').value = profileData.contactMethod || 'Email';
      document.getElementById('location').value = profileData.location || 'Surrey Campus';
      document.getElementById('vehicle').value = profileData.vehicle || '';
      document.getElementById('linkedin').value = profileData.linkedin || '';
      document.getElementById('emergencyName').value = profileData.emergencyName || '';
      document.getElementById('emergencyPhone').value = profileData.emergencyPhone || '';
      document.getElementById('favoriteMusic').value = profileData.favoriteMusic || '';

      // Load carpool preferences (array)
      const prefs = profileData.carpoolPrefs || [];
      document.querySelectorAll('input[name="carpoolPrefs"]').forEach(checkbox => {
        checkbox.checked = prefs.includes(checkbox.value);
      });

      document.getElementById('bio').value = profileData.bio || '';
    } else {
      // Set some default values (optional)
      document.getElementById('fullName').value = "John Doe";
      document.getElementById('email').value = "john.doe@example.com";
      document.getElementById('phone').value = "+1 (604) 555-9876";
      document.getElementById('dob').value = "";
      document.getElementById('gender').value = "";
      document.getElementById('contactMethod').value = "Email";
      document.getElementById('location').value = "Surrey Campus";
      document.getElementById('vehicle').value = "2018 Toyota Prius";
      document.getElementById('linkedin').value = "";
      document.getElementById('emergencyName').value = "";
      document.getElementById('emergencyPhone').value = "";
      document.getElementById('favoriteMusic').value = "";
      document.querySelectorAll('input[name="carpoolPrefs"]').forEach(cb => cb.checked = false);
      document.getElementById('bio').value = "Passionate about sustainable commuting, John loves connecting with fellow KPU students to share rides and reduce carbon footprint.";
    }
  });

  // Save profile data to localStorage on form submit
  document.getElementById('editProfileForm').addEventListener('submit', (e) => {
    e.preventDefault();

    const carpoolPrefs = Array.from(document.querySelectorAll('input[name="carpoolPrefs"]:checked')).map(cb => cb.value);

    const profileData = {
      fullName: document.getElementById('fullName').value.trim(),
      email: document.getElementById('email').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      dob: document.getElementById('dob').value,
      gender: document.getElementById('gender').value,
      contactMethod: document.getElementById('contactMethod').value,
      location: document.getElementById('location').value,
      vehicle: document.getElementById('vehicle').value.trim(),
      linkedin: document.getElementById('linkedin').value.trim(),
      emergencyName: document.getElementById('emergencyName').value.trim(),
      emergencyPhone: document.getElementById('emergencyPhone').value.trim(),
      favoriteMusic: document.getElementById('favoriteMusic').value,
      carpoolPrefs: carpoolPrefs,
      bio: document.getElementById('bio').value.trim()
    };

    localStorage.setItem('rideShareProfile', JSON.stringify(profileData));
    alert('Profile saved successfully!');
    // window.location.href = 'profile.html'; // optionally redirect
  });
</script>
</body>
</html>
